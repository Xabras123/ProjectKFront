{"remainingRequest":"/home/alepopo/Documents/AleDox/Trabajo/Front/Vue.js/projectk/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/alepopo/Documents/AleDox/Trabajo/Front/Vue.js/projectk/src/views/Movies.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/alepopo/Documents/AleDox/Trabajo/Front/Vue.js/projectk/src/views/Movies.vue","mtime":1612357505968},{"path":"/home/alepopo/Documents/AleDox/Trabajo/Front/Vue.js/projectk/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alepopo/Documents/AleDox/Trabajo/Front/Vue.js/projectk/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/alepopo/Documents/AleDox/Trabajo/Front/Vue.js/projectk/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/alepopo/Documents/AleDox/Trabajo/Front/Vue.js/projectk/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICdheGlvcycKZXhwb3J0IGRlZmF1bHQgewogICAgZGF0YSgpewogICAgICAgIHJldHVybnsKICAgICAgICAgICAgaXNNb3ZpZURldGFpbHM6IFtdLAogICAgICAgICAgICBpc01vdmllRGV0YWlsczI6IGZhbHNlLAogICAgICAgICAgICBtb3ZpZXM6IFsKCiAgICAgICAgICAgIF0sCiAgICAgICAgICAgIGNhdGVnb3JpZXM6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtuYW1lOiAiQ29tZWRpYSIsIGNoZWNrZWQ6IGZhbHNlfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtuYW1lOiAiQWNjaW9uIiwgY2hlY2tlZDogZmFsc2V9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAge25hbWU6ICJUZXJyb3IiLCAgY2hlY2tlZDogZmFsc2V9LCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtuYW1lOiAiQW1vciIsICBjaGVja2VkOiBmYWxzZX0sIAogICAgICAgICAgICAgICAgICAgICAgICAgICAge25hbWU6ICJQb2xpY2lhbCIsIGNoZWNrZWQ6IGZhbHNlfSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bmFtZTogIkRvY3VtZW50YWwiLCBjaGVja2VkOiBmYWxzZX0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bmFtZTogIkFuaW1lIiwgY2hlY2tlZDogZmFsc2V9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAge25hbWU6ICJBZHZlbnR1cmUiLCBjaGVja2VkOiBmYWxzZX0sCiAgICAgICAgICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgIG1vdmllVGl0bGU6ICIiLAoKICAgICAgICB9CiAgICB9LAoKICAgIG1ldGhvZHM6ewoKICAgICAgICBhc3luYyByYXRlTW92aWUocmF0ZSwgaW5kZXgpewoKICAgICAgICAgICAgYXdhaXQgYXhpb3MucG9zdChgaHR0cDovL2xvY2FsaG9zdDozMDAwL3JhdGUtbW92aWVgLCAKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgbW92aWVJZDogdGhpcy5tb3ZpZXNbaW5kZXhdLl9pZCwKICAgICAgICAgICAgICAgIHJhdGluZzogcmF0ZSwKICAgICAgICAgICAgfQogICAgICAgICAgICApCiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHsKCiAgICAgICAgICAgICAgICB0aGlzLm1vdmllc1tpbmRleF0ubW92aWVMaWtlUGVyY2VudGFnZSA9IHJlcy5kYXRhLnJhdGluZzsKICAgICAgICAgICAgICAgIAoKICAgICAgICAgICAgfQogICAgICAgICAgICApLmNhdGNoKChlcnJvcikgPT4gewoKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiRXJyb3IgZGUgc2Vydmlkb3IiKTsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApCiAgICAgICAgfSwKCgoKICAgICAgICBtb3VzZU92ZXIoaW5kZXgpIHsKICAgICAgICAgICAgdGhpcy5pc01vdmllRGV0YWlsczIgPXRydWU7CiAgICAgICAgICAgIHRoaXMuaXNNb3ZpZURldGFpbHNbaW5kZXhdID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy5pc01vdmllRGV0YWlscy5wdXNoKGZhbHNlKQogICAgICAgICAgICB0aGlzLmlzTW92aWVEZXRhaWxzLnBvcCgpCiAgICAgICAgfSwKCiAgICAgICAgbW91c2VMZWF2ZShpbmRleCkgewogICAgICAgICAgIAogICAgICAgICAgICB0aGlzLmlzTW92aWVEZXRhaWxzMiA9ZmFsc2U7CgogICAgICAgICAgICB0aGlzLmlzTW92aWVEZXRhaWxzW2luZGV4XSA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLmlzTW92aWVEZXRhaWxzLnB1c2goZmFsc2UpCiAgICAgICAgICAgIHRoaXMuaXNNb3ZpZURldGFpbHMucG9wKCkKCiAgICAgICAgfSwKICAgICAgICBhc3luYyBzZWFyY2hNb3ZpZUJ5VGl0bGUoKXsKCiAgICAgICAgICAgIGlmKHRoaXMubW92aWVUaXRsZSA9PSAiIil7CiAgICAgICAgICAgICAgICAvL3RoaXMubW92aWVzID0gW10KICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICB9CgogICAgICAgICAgICBhd2FpdCBheGlvcy5wb3N0KGBodHRwOi8vbG9jYWxob3N0OjMwMDAvc2VhcmNoLW1vdmllLWJ5LXRpdGxlYCwgCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLm1vdmllVGl0bGUsCiAgICAgICAgICAgIH0KICAgICAgICAgICAgKQogICAgICAgICAgICAudGhlbigocmVzKSA9PiB7CgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB0aGlzLm1vdmllcyA9IHJlcy5kYXRhOwogICAgICAgICAgICAgICAgdGhpcy5tb3ZpZXNIb3ZlckluaXRpYWxpemVyKCk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgfQogICAgICAgICAgICApLmNhdGNoKChlcnJvcikgPT4gewoKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiRXJyb3IgZGUgc2Vydmlkb3IiKTsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApCgogICAgICAgIH0sCgogICAgICAgIGFzeW5jIHNlYXJjaE1vdmllQnlDYXRlZ29yeSgpewoKICAgICAgICAgICAgY29uc3QgY2F0ZWdvcmllc05hbWVzID0gW10KICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHRoaXMuY2F0ZWdvcmllcy5sZW5ndGg7IGkrKyl7CiAgICAgICAgICAgICAgICBpZih0aGlzLmNhdGVnb3JpZXNbaV0uY2hlY2tlZCl7CiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcmllc05hbWVzLnB1c2godGhpcy5jYXRlZ29yaWVzW2ldLm5hbWUpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIAoKICAgICAgICAgICAgYXdhaXQgYXhpb3MucG9zdChgaHR0cDovL2xvY2FsaG9zdDozMDAwL3NlYXJjaC1tb3ZpZS1ieS1jYXRlZ29yaWVzYCwgCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGNhdGVnb3JpZXM6IGNhdGVnb3JpZXNOYW1lcywKICAgICAgICAgICAgfQogICAgICAgICAgICApCiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHsKCgogICAgICAgICAgICAgICAgdGhpcy5tb3ZpZXMgPSByZXMuZGF0YQogICAgICAgICAgICB9CiAgICAgICAgICAgICkuY2F0Y2goKGVycm9yKSA9PiB7CgogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJFcnJvciBkZSBzZXJ2aWRvciIpOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICkKCiAgICAgICAgfSwKCgoKICAgICAgICBtb3ZpZXNIb3ZlckluaXRpYWxpemVyKCkgewogICAgICAgICAgICB0aGlzLmlzTW92aWVEZXRhaWxzID0gW107CiAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLm1vdmllcy5sZW5ndGg7IGkrKyl7CgogICAgICAgICAgICAgICAgdGhpcy5pc01vdmllRGV0YWlscy5wdXNoKGZhbHNlKTsKICAgICAgICAgICAgfQogICAgICAgIH0sCgoKICAgICAgICBjaGVja0NoZWNrYm94KGluZGV4KSB7CiAgICAgICAgICAgIAogICAgICAgICAgICB0aGlzLmNhdGVnb3JpZXNbaW5kZXhdLmNoZWNrZWQgPSAhdGhpcy5jYXRlZ29yaWVzW2luZGV4XS5jaGVja2VkOwoKICAgICAgICB9LAoKCiAgICAgICAgYXN5bmMgYWRkVmlldyhpbmRleCl7CgoKICAgICAgICAgICAgCgogICAgICAgICAgICBhd2FpdCBheGlvcy5wb3N0KGBodHRwOi8vbG9jYWxob3N0OjMwMDAvYWRkLXZpZXdgLCAKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgbW92aWVJZDogdGhpcy5tb3ZpZXNbaW5kZXhdLl9pZCwKICAgICAgICAgICAgfQogICAgICAgICAgICApCiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHsKCiAgICAgICAgICAgICAgICB0aGlzLm1vdmllc1tpbmRleF0udmlld3MgPSByZXMuZGF0YS52aWV3cwogICAgICAgICAgICAgICAgCgogICAgICAgICAgICB9CiAgICAgICAgICAgICkuY2F0Y2goKGVycm9yKSA9PiB7CgogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJFcnJvciBkZSBzZXJ2aWRvciIpOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICkKCiAgICAgICAgfQogICAgfSwKCiAgICBjb21wdXRlZDp7CgogICAgfSwKCiAgICBhc3luYyBtb3VudGVkKCl7CiAgICAgIGF3YWl0IGF4aW9zLmdldChgaHR0cDovL2xvY2FsaG9zdDozMDAwL2dldC1tb3ZpZXNgKQogICAgICAudGhlbigocmVzKSA9PiB7CiAgICAgICAgdGhpcy5tb3ZpZXMgPSByZXMuZGF0YQogICAgICAgIHRoaXMubW92aWVzSG92ZXJJbml0aWFsaXplcigpOwoKCiAgICAgIH0KICAgICAgKS5jYXRjaCgoZXJyb3IpID0+IHsKCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJFcnJvciBkZSBzZXJ2aWRvciIpOwogICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CgogICAgICAgIH0KICAgICAgKQoKICAgIH0KCn0K"},{"version":3,"sources":["Movies.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;;;AAIA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;;AAEA;;AAEA;;;AAGA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA","file":"Movies.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"w-full \">\n\n\n    <div class=\"shadow-lg bg-gradient-to-b from-indigo-600 to-blue-700  text-center p-5 \">\n\n        <h1 class=\"text-2xl text-gray-100\">Peliculas</h1>\n    </div>\n\n\n    <div class=\"divide-y  flex  justify-between ml-10 mr-10 mt-5\">\n        <p class=\"flex justify-center text-xl\">Buscar por Nombre</p>\n\n        <div class=\"flex justify-center\">\n\n            <input  class=\"bg-gray-200\" v-model=\"movieTitle\" type=\"text\" placeholder=\"Ingrese el nombre de la pelicula\">\n            <button class=\"bg-blue-200  rounded \" @click=\"searchMovieByTitle\">Buscar</button>\n        </div>\n    </div>\n\n    <p class=\"flex justify-center mt-5\"> Categorias</p>\n    <div class=\"flex justify-between  ml-10 mr-10 \">\n        <div class=\"my-5\" id=\"categories\" v-for=\"(category, index) in categories\" :key=\"category.name\">\n        <input  @click=\"checkCheckbox(index)\" type=\"checkbox\" :id=\"category.name\">\n        <label :for=\"category\">{{category.name}}</label>\n        </div>\n    </div>\n\n    <div class=\"mb-5 flex justify-center\">\n        <button class=\"bg-blue-200 p-2 rounded \" @click=\"searchMovieByCategory\">Buscar por Categorias</button>\n\n    </div>\n\n    <div class=\" mx-10  grid grid-cols-4 gap-20  md:grid grid-cols-3 sm:grid grid-cols-1\" >\n        <div  @mouseover=\"mouseOver(index)\"  @mouseleave=\"mouseLeave(index)\" id=\"moviesDiv\" class=\"text-center flex justify-around \" v-for=\"(movie, index) in movies\" :key=\"index\">\n\n            <div id=\"movieDiv\" class=\"mt-4 inline-block bg-gray-300  shadow-lg rounded w-full bg-gradient-to-t from-gray-400\" >\n                <div >\n                    <p class=\"text-xl my-2 py-2\" id=\"movieTitle\">{{movie.title}}</p>\n                    <div v-if=\"!isMovieDetails[index]\"  width=\"320\" class=\"flex justify-center bg-gradient-to-t from-gray-500 rounded\">\n                        <img   class=\"object-fill\"  :src=\"movie.img\" >\n\n                    </div>\n                    <div v-else class=\"py-2 px-3 bg-gray-200 \" width=\"300\">\n                        <p class=\"text-xs my-4\">\"{{movie.synopsis}}\"</p>\n                        <p class=\"mt-y\">Vistas: {{movie.views}}</p>\n                        <p>Rating: {{ movie.movieLikePercentage}}%</p>\n                        <div class=\"flex justify-center my-3\">\n                            <img  @click=\"rateMovie(true, index)\" class=\"w-2/12 bg-gray-200 mx-4\"  src=\"../assets/thumbs.png\"  >\n                            <img  @click=\"rateMovie(false, index)\"  class=\"w-2/12 bg-gray-200 mx-4 transform rotate-180\"  src=\"../assets/thumbs.png\"  >\n\n                        </div>\n                    \n                        <button @click=\"addView(index)\" class=\"mt-3 rounded bg-blue-300 p-1 px-2 shadow-md text-md\">¡Vi esta pelicula!</button>\n\n                    </div>\n\n\n                </div>\n\n            </div>\n        </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\nexport default {\n    data(){\n        return{\n            isMovieDetails: [],\n            isMovieDetails2: false,\n            movies: [\n\n            ],\n            categories: [\n                            {name: \"Comedia\", checked: false},\n                            {name: \"Accion\", checked: false},\n                            {name: \"Terror\",  checked: false}, \n                            {name: \"Amor\",  checked: false}, \n                            {name: \"Policial\", checked: false}, \n                            {name: \"Documental\", checked: false},\n                            {name: \"Anime\", checked: false},\n                            {name: \"Adventure\", checked: false},\n                        ],\n            movieTitle: \"\",\n\n        }\n    },\n\n    methods:{\n\n        async rateMovie(rate, index){\n\n            await axios.post(`http://localhost:3000/rate-movie`, \n            {\n                movieId: this.movies[index]._id,\n                rating: rate,\n            }\n            )\n            .then((res) => {\n\n                this.movies[index].movieLikePercentage = res.data.rating;\n                \n\n            }\n            ).catch((error) => {\n\n                    console.log(\"Error de servidor\");\n                    console.log(error);\n\n                }\n            )\n        },\n\n\n\n        mouseOver(index) {\n            this.isMovieDetails2 =true;\n            this.isMovieDetails[index] = true;\n            this.isMovieDetails.push(false)\n            this.isMovieDetails.pop()\n        },\n\n        mouseLeave(index) {\n           \n            this.isMovieDetails2 =false;\n\n            this.isMovieDetails[index] = false;\n            this.isMovieDetails.push(false)\n            this.isMovieDetails.pop()\n\n        },\n        async searchMovieByTitle(){\n\n            if(this.movieTitle == \"\"){\n                //this.movies = []\n                return\n            }\n\n            await axios.post(`http://localhost:3000/search-movie-by-title`, \n            {\n                title: this.movieTitle,\n            }\n            )\n            .then((res) => {\n\n                \n                this.movies = res.data;\n                this.moviesHoverInitializer();\n                \n            }\n            ).catch((error) => {\n\n                    console.log(\"Error de servidor\");\n                    console.log(error);\n\n                }\n            )\n\n        },\n\n        async searchMovieByCategory(){\n\n            const categoriesNames = []\n            for(var i = 0; i < this.categories.length; i++){\n                if(this.categories[i].checked){\n                    categoriesNames.push(this.categories[i].name)\n                }\n            }\n\n            \n\n            await axios.post(`http://localhost:3000/search-movie-by-categories`, \n            {\n                categories: categoriesNames,\n            }\n            )\n            .then((res) => {\n\n\n                this.movies = res.data\n            }\n            ).catch((error) => {\n\n                    console.log(\"Error de servidor\");\n                    console.log(error);\n\n                }\n            )\n\n        },\n\n\n\n        moviesHoverInitializer() {\n            this.isMovieDetails = [];\n            for(var i = 0; i < this.movies.length; i++){\n\n                this.isMovieDetails.push(false);\n            }\n        },\n\n\n        checkCheckbox(index) {\n            \n            this.categories[index].checked = !this.categories[index].checked;\n\n        },\n\n\n        async addView(index){\n\n\n            \n\n            await axios.post(`http://localhost:3000/add-view`, \n            {\n                movieId: this.movies[index]._id,\n            }\n            )\n            .then((res) => {\n\n                this.movies[index].views = res.data.views\n                \n\n            }\n            ).catch((error) => {\n\n                    console.log(\"Error de servidor\");\n                    console.log(error);\n\n                }\n            )\n\n        }\n    },\n\n    computed:{\n\n    },\n\n    async mounted(){\n      await axios.get(`http://localhost:3000/get-movies`)\n      .then((res) => {\n        this.movies = res.data\n        this.moviesHoverInitializer();\n\n\n      }\n      ).catch((error) => {\n\n            console.log(\"Error de servidor\");\n            console.log(error);\n\n        }\n      )\n\n    }\n\n}\n</script>\n\n<style>\n\n\n\n</style>"]}]}